!function(){"use strict";if(void 0===lpGlobalSettings)throw new Error("lpGlobalSettings is undefined");var e={admin:{apiAdminNotice:lpGlobalSettings.rest+"lp/v1/admin/tools/admin-notices",apiAdminOrderStatic:lpGlobalSettings.rest+"lp/v1/orders/statistic",apiAddons:lpGlobalSettings.rest+"lp/v1/addon/all",apiAddonAction:lpGlobalSettings.rest+"lp/v1/addon/action",apiSearchCourses:lpGlobalSettings.rest+"lp/v1/admin/tools/search-course",apiAssignUserCourse:lpGlobalSettings.rest+"lp/v1/admin/tools/assign-user-course"},frontend:{apiWidgets:lpGlobalSettings.lp_rest_url+"lp/v1/widgets/api"}};function t(){const t=document.querySelectorAll(".learnpress-widget-wrapper");if(!t.length)return;t.forEach((t=>{t.classList.contains("learnpress-widget-wrapper__restapi")&&(t=>{const s=t.dataset.widget?JSON.parse(t.dataset.widget):"",n=e.frontend.apiWidgets,o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,params_url:lpGlobalSettings.lpArchiveSkeleton})};0!==lpGlobalSettings.user_id&&(o.headers["X-WP-Nonce"]=lpGlobalSettings.nonce),((e,t={},s={})=>{"function"==typeof s.before&&s.before(),fetch(e,{method:"GET",...t}).then((e=>e.json())).then((e=>{"function"==typeof s.success&&s.success(e)})).catch((e=>{"function"==typeof s.error&&s.error(e)})).finally((()=>{"function"==typeof s.completed&&s.completed()}))})(n,o,{before:()=>{},success:e=>{const{data:s,status:n,message:o}=e;s&&"success"===n?t.insertAdjacentHTML("afterbegin",s):o&&t.insertAdjacentHTML("afterbegin",`<div class="lp-ajax-message error" style="display:block">${o}</div>`)},error:e=>{},completed:()=>{delete t.dataset.widget,t.querySelector(".lp-skeleton-animation").remove()}})})(t)}))}document.addEventListener("DOMContentLoaded",(function(e){t()}))}();